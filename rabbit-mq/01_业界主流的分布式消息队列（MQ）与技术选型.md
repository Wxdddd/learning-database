### 业界主流的分布式消息队列（MQ）与技术选型



#### 分布式消息队列（MQ）应用场景

- 服务解耦：服务与服务之间有弱依赖时，使用MQ来处理。
- 削峰填谷：及时性很高，流量很大的应用场景（秒杀、大促）。消息缓存至MQ中应用程序慢速消费，减轻服务器压力。
- 异步化缓冲：在某些业务逻辑中允许一些异步的操作只需要做到最终一致性即可。

#### 分布式消息队列（MQ）应用思考点

- 生产端的可靠性投递：生产端的消息一定要与数据库数据保持一致性。

- 消费端幂等：消费端一定确保消息不能重复消费。
- 高可用：消息不丢失
- 低延迟：流量高峰时
- 可靠性：确保消息发到MQ上肯定不会丢失
- 堆积的能力：海量数据时
- 扩展性：是否支持无感知的横向扩容

- ..........

#### 如何技术选型

> 主流的四种消息中间件：ActiveMQ、RabbitMQ、RocketMQ、Kafka

- 各个MQ的性能、优缺点、相应的业务场景。
  - ActiveMQ：适用于中小型，传统型并且并发和承载能力不是特别大的企业。
  - RabbitMQ：支持高可用，处理海量数据高并发。但是横向扩展能力差。
- 集群架构模式，分布式、可扩展、高可用、可维护性。
  - RabbitMQ可扩展型较差，高可用、可维护性较好。
  - RocketMQ、Kafka可扩展型，高可用较好，可维护性较差。
- 综合成本问题，集群规模，人员成本。
  - 考虑人员技术熟悉程度。
  - 社区活跃度。
  - 框架是否持续更新。
- 未来的方向、规划、思考。